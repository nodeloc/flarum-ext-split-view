(()=>{var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const o=flarum.core.compat["forum/app"];var r=e.n(o);const i=flarum.core.compat["common/extend"],s=flarum.core.compat["forum/states/ComposerState"];var n=e.n(s);const c=flarum.core.compat["forum/components/ComposerBody"];var a=e.n(c);const p=flarum.core.compat["forum/components/DiscussionComposer"];var l=e.n(p);const f=flarum.core.compat["common/components/TextEditor"];var d=e.n(f);const u=flarum.core.compat["common/components/Button"];var v=e.n(u);const h=flarum.core.compat["common/components/Tooltip"];var w=e.n(h);r().initializers.add("nodeloc-split-view",(function(){(0,i.extend)(n().prototype,"load",(function(e,t){this.isSplitView=!1})),(0,i.extend)(d().prototype,"controlItems",(function(e){e.add("preview",m(w(),{text:r().translator.trans("core.forum.composer.preview_tooltip")},m(v(),{icon:"fas fa-columns",className:"Button Button--icon",onclick:this.attrs.preview})))})),(0,i.extend)(a().prototype,"headerItems",(function(e){var t;null!=(t=r().current.get("stream"))&&t.discussion||e.add("preview-discussion",m("div",{className:"Split-view Post-body "+(r().composer.isSplitView?"":"hidden")}),50)})),l().prototype.jumpToPreview=function(e){var t=this;if(e instanceof MouseEvent)if(this.composer.isSplitView=!this.composer.isSplitView,this.composer.isSplitView){this.$(".TextEditor textarea").css({width:"50%"});var o=this.composer.fields.content();s9e.TextFormatter.preview(this.composer.fields.content(),this.$(".Split-view")[0]),this.composerPreviewInterval=setInterval((function(){var e=t.composer.fields.content();e!==o&&(o=e,s9e.TextFormatter.preview(e,t.$(".Split-view")[0]))}),100)}else this.$(".TextEditor textarea").css({width:"100%"})},(0,i.extend)(a().prototype,"oncreate",(function(){this.composerPreviewInterval=setInterval((function(){if(r().composer.isSplitView){var e=this.$(".TextEditor textarea");e.offset()&&this.$(".Split-view").css({width:e.width(),height:e.height()+10,top:e.offset().top-$(".Composer").offset().top,left:e.offset().left-$(".Composer").offset().left+e.width()})}}),100)})),(0,i.extend)(a().prototype,"onremove",(function(){clearInterval(this.composerPreviewInterval)}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map